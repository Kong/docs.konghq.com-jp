---
title: "概要"
content_type: "explanation"
---

{{site.base_gateway}}は、次の4つの異なるモードでデプロイできます。

* {{site.konnect_short_name}}（ホストされたコントロールプレーン（CP））
* ハイブリッド
* 従来モード（データベース）
* DBレスで宣言的

各モードには利点と制限があるため、 {{site.base_gateway}}を本番環境にインストールする際にどのモードを使用するかを決定する際には、それらを慎重に検討することが重要です。

次のセクションでは、各モードについて簡単に説明します。

{{ site.konnect_short_name }}
-----

{{site.base_gateway}}を使用する場合、 
{{ site.konnect_short_name }}使用すると、最速で開始できます。独自のコントロールプレーン（CP）やデータベースをデプロイしなくても、独自のデータプレーンノード（DP）をデプロイして顧客のトラフィックを処理できます。


{{ site.konnect_short_name }}は、Kongがユーザー向けにコントロールプレーン（CP）をホストする、ハイブリッドモードのデプロイメントです。つまり、ユーザーはハイブリッドモードのデプロイメントのすべてのメリットが得られるうえ、複数のコントロールプレーンノードを自分で実行する必要もありません。

{% include_cached /md/gateway/deployment-topologies.md topology='konnect' %}
> 
> _図1: {{ site.konnect_short_name }}において、Kongはコントロールプレーンと関連するすべてのアプリケーションをホス トしています：Dev Portal、Gateway Manager、Analytics、 {{site.service_catalog_name}}など。トラフィックを処理するためにデータプレーンを{{ site.konnect_short_name }}に接続し、コントロールプレーンからすべての設定を取得します。_

構成の変更は、 {{ site.konnect_short_name }} UI と構成ウィザードを使用して行うことも、[decK](/deck/latest/) を使用して自動的に適用することもできます。

自己管理型ハイブリッドモードと同様に、コントロールプレーン（CP）がオフラインの場合でも、データプレーン（DP）ノードは引き続きトラフィックを処理します。また、{{site.base_gateway}} がコントロールプレーン（CP）の保護を行ってくれるため、保護について心配する必要はありません。

最後に、{{ site.konnect_short_name }} はクラウド管理のコントロールプレーンとコントロールプレーングループをサポートしているため、必要に応じて構成をセグメント化できます。それは、ビジネス単位または環境単位で指定できます。ハイブリッドモードを使用してこれを実現するには、セグメントごとに 1 つのコントロールプレーン（CP）をデプロイする必要がありますが、{{ site.konnect_short_name }} では同じ UI と API を使用して複数の構成セットを管理できます。

今すぐ{{ site.konnect_short_name }}を無料で[始めましょう](https://cloud.konghq.com/register)。

ハイブリッドモード
---------

ハイブリッドモードでは、クラスタ内の {{site.base_gateway}} ノードは 2 つのロールに分割されます。構成の管理と Admin API の提供を行うコントロールプレーン（CP）と、プロキシのトラフィックを提供するデータプレーン（DP）です。多数の DP ノードが 1 つの CP ノードに接続されます。従来のデプロイ方法のようにデータベースの内容に直接アクセスするのではなく、DP ノードは CP ノードとの接続を維持し、リアルタイムで最新の構成を受信します。

{% include_cached /md/gateway/deployment-topologies.md topology='hybrid' %}
> 
> *図 2: 自己管理型ハイブリッドモードでは、コントロールプレーン（CP）とデータプレーン（DP）は異なるノードでホストされます。コントロールプレーン（CP）はデータベースに接続し、データプレーン（DP）はコントロールプレーン（CP）から構成を受け取ります。* 

ハイブリッドモードのデプロイには、次のようなメリットがあります。

* ユーザーは、DP グループごとにローカルでクラスタ化されたデータベースを必要とせずに、異なるデータセンター、地域、またはゾーンにデータプレーン（DP）のグループをデプロイできます。
* データベースの可用性はデータプレーン（DP）の可用性には影響しません。コントロールプレーン（CP）がオフラインの場合、データプレーン（DP）は最後に認識された構成を使用して実行されます。
* データベースへの直接接続が必要なのはCPノードのみであるため、データベースを往復するトラフィック量を大幅に減らします。
* DPノードの1つが危険にさらされても、攻撃者は {{site.base_gateway}} クラスターの他のノードに影響を与えることはできません。

従来（データベース）モード
-------------

[従来のモード](/gateway/{{page.release}}/production/deployment-topologies/traditional/)では、 {{site.base_gateway}}にはルート、サービス、プラグインなどの構成されたエンティティを保存するためのデータベースが必要です。[サポートされているデータベース](/gateway/{{page.release}}/support/third-party/#data-stores)を参照してください。

{% include_cached /md/gateway/deployment-topologies.md topology='traditional' %}
> 
> *図3：従来のデプロイでは、すべての{{site.base_gateway}}ノードがデータベースに接続します。各ノードは、独自の構成を管理します。* 

Kongを使い始めるには、従来モードで{{ site.base_gateway }}を実行する方法が最も簡単です。この方法は、データベースを必要とするプラグイン（クラスタストラテジを伴う流量制限やOAuth2など）をサポートする唯一のデプロイメントトポロジーです。ただし、欠点もいくつかあります。

従来モードで実行している場合、すべての {{ site.base_gateway }} ノードはコントロールプレーン（CP）とデータプレーン（DP）の両方として動作します。これは、 **ノードのいずれかが危険にさらされると** 、実行中のゲートウェイ構成全体が危険にさらされることを意味します。対照的に、[ハイブリッドモード](/gateway/{{page.release}}/production/deployment-topologies/hybrid-mode/)では個別の CP ノードと DP ノードがあり、攻撃対象領域が縮小されます。

さらに、Kong Managerで{{site.ee_product_name}}を実行している場合、分析データとグラフをレンダリングするためにコストのかかる計算が実行されるため、Kong Managerを実行しているノードでのリクエストスループットが低下する可能性があります。

[Admin API](/gateway/{{page.release}}/admin-api/)または宣言型構成ファイル[\(decK\)](/deck/latest/)を使用して、 {{site.base_gateway}}を従来モードで構成できます。

DBレスモードと宣言型モード
--------------

[DBレスモード](/gateway/{{page.release}}/production/deployment-topologies/db-less-and-declarative-config/)を有効にすると、複雑さが軽減され、より柔軟なデプロイパターンを作成できます。このモードでは、ルート、サービス、プラグインなどの設定済みのエンティティがノードのメモリに保存されます。

{% include_cached /md/gateway/deployment-topologies.md topology='dbless' %}
> 
> *図4：DBレスモードでは、構成はYAMLファイルを介して適用されます。
> 
{{ site.base_gateway }}ノードはデータベースにも他のノードにも接続されていません。* 

DB\-lessモードで実行する場合、2番目のファイルを使用して{{ site.base_gateway }}に構成が提供されます。このファイルには、Kongの宣言型構成構文を使用したYAMLまたはJSON形式の構成が含まれています。

{{site.kic_product_name}}でもDBレスモードを使用します。この場合、Kubernetes APIサーバーは、変更が加えられる都度、Kongの`/config`エンドポイントを使用して、メモリ内の実行構成を更新します。

DBレスモードと宣言型構成の組み合わせには、次のような利点があります。

* 依存関係の数の削減: ユースケースの設定全体がメモリ内に収まる場合は、データベースのインストールを管理する必要はありません。
* 構成は常に既知の状態です。サービスの作成とAdmin APIを使用したルート間には中間状態はありません。
* CI/CD シナリオの自動化に適しています。エンティティの構成は、Gitリポジトリを経由で管理される信頼できる唯一の情報源で保存できます。

このモードには、次のような制限があります。

* [Admin API](/gateway/{{page.release}}/admin-api/)は読み取り専用です。
* 流量制限（クラスタモード）など、データベースに情報を保存するプラグインは完全には機能しません。

