swagger: "2\.0"
情報:
説明: Vitals API
バージョン: 2\.4\.0
タイトル: Vitals API
ベースパス: / 
タグ:

* name: health 説明: Kongクラスタのヘルスに関する統計
* 名前：traffic 説明：Kong を経由したトラフィックに関する統計 スキーム：
* http paths: /vitals: get: tags: \- vitals 概要: 収集した統計に関する情報を入手します description: "" operationId: getVitalsInfo produces: \- application/json responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/VitalsInfo" /vitals/cluster: get: tags: \- health 概要: このKongクラスタのヘルス統計を取得します description: "" operationId: getClusterStats produces: \- application/json parameters: \- name: interval in: query 説明: 時系列の粒度（日、分、秒） required: true type: string \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/ClusterVitalsTimeSeriesWithMetadata" "400": 説明: クエリパラメータが無効です /vitals/cluster/status\_codes: get: deprecated: true tags: \- traffic 概要: クラスタ全体で返されるステータスコードクラスを取得します 説明: この操作は非推奨です。Use /status\_code\_classes. operationId: getClusterStatusCodeStats produces: \- application/json parameters: \- name: interval in: query 説明: 時系列の粒度（日、分、秒） required: true type: string \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/ClusterVitalsStatusCodesWithMetadata" "400": 説明: 無効なクエリパラメータです /vitals/nodes: get: tags: \- health 概要: すべてのノードのヘルスについて統計を取得します description: "" operationId: getAllNodeStats produces: \- application/json parameters: \- name: interval in: query 説明: 時系列の粒度（日、分、秒） required: true type: string \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/NodeVitalsTimeSeriesWithMetadata" "400": 説明: 無効なクエリパラメータです "/vitals/nodes/\{node\_id\}": get: tags: \- health 概要: UUIDで特定のノードの統計情報を取得します description: "" operationId: getNodeStatsByID produces: \- application/json parameters: \- name: node\_id type: string in: path 説明: 統計を取得するノード required: true \- name: interval in: query 説明: 時系列の粒度（日、分、秒） required: true type: string \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/NodeVitalsTimeSeriesWithMetadata" "400": 説明: 無効なクエリパラメータです "404": 説明: 要求されたノードが見つかりません "/\{workspace\_name\}/vitals/consumers/\{consumer\_id\}/cluster": get: tags: \- traffic deprecated: true 概要: クラスタ全体にわたる特定のコンシューマに対するリクエストの数を取得します 説明: この操作は非推奨です。Use /vitals/status\_codes/by\_consumer\_and\_route operationId: getConsumerClusterStats produces: \- application/json parameters: \- name: workspace\_name type: string in: path 説明: 要求されたコンシューマを含むワークスペース。 required: true \- name: consumer\_id type: string in: path 説明: 統計情報を取得するコンシューマ required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/ClusterConsumersTimeSeriesWithMetadata" "400": 説明: クエリパラメータが無効です "404": 説明: 要求されたコンシューマが見つかりません /\{workspace\_name\}/vitals/status\_code\_classes: get: tags: \- traffic 概要: クラスタまたはワークスペースのステータスコードクラスを取得します。 description: "" operationId: getStatusCodeClassesByWorkspace produces: \- application/json parameters: \- name: workspace\_name type: string in: path 説明: >\- オプションのパラメータ。指定されている場合、ワークスペースのステータスコードクラスを 返し、それ以外の場合はクラスタのステータスコードクラスを返します。 required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: false type: string responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/StatusCodesByEntityMetadata" "400": 説明: クエリパラメータが無効です "404" 説明: 要求されたコンシューマが見つかりません /\{workspace\_name\}/vitals/status\_codes/by\_service: get: tags: \- traffic 概要: 特定のサービスから返されるステータスコードの時系列を取得します description: "" operationId: getStatusCodesByService produces: \- application/json parameters: \- name: service\_id type: string in: query 説明: ステータスコードを取得するサービス required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: true type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: true type: string \- name: workspace\_name type: string in: path 説明: 要求されたサービスを含むワークスペース required: true responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/StatusCodesByEntityTimeSeriesWithMetadata" "400": 説明: クエリパラメータが無効です "404": 説明: 要求されたサービスが見つかりません /\{workspace\_name\}/vitals/status\_codes/by\_route: get: tags: \- traffic 概要: 特定のルートのステータスのクラスタ全体のカウントを取得します description: "" operationId: getStatusCodesByRoute produces: \- application/json parameters: \- name: route\_id type: string in: query 説明: ステータスコードを取得するルート required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: true type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します required: true type: string \- name: workspace\_name type: string in: path 説明: 要求されたルートを含むワークスペース。 required: true responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/StatusCodesByEntityTimeSeriesWithMetadata" "400": 説明: クエリパラメータが無効です "404": 説明: 要求されたルートが見つかりません /\{workspace\_name\}/vitals/status\_codes/by\_consumer: get: tags: \- traffic 概要: 特定のコンシューマのクラスタ全体のステータス数を取得します description: "" operationId: getStatusCodesByRoute produces: \- application/json parameters: \- name: consumer\_id type: string in: query 説明: ステータスコードを取得するルート required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）で時系列の開始を要求します required: true type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）で時系列の終了を要求します required: true type: string \- name: workspace\_name type: string in: path 説明: 要求されたコンシューマを含むワークスペース。 required: true responses: "200": description: successful operation schema: $ref: "\#/definitions/StatusCodesByEntityTimeSeriesWithMetadata" "400": 説明: クエリパラメータが無効です "404": 説明: 要求されたルートが見つかりません "/\{workspace\_name\}/vitals/status\_codes/by\_consumer\_and\_route": get: tags: \- traffic 概要: >\- 指定されたコンシューマによって呼び出されたすべてのルートのステータスコードを指定された 時間枠で取得します description: "" operationId: getStatusCodesByConsumerAndRoute produces: \- application/json parameters: \- name: consumer\_id type: string in: query 説明: ステータスコードを取得するコンシューマ required: true \- name: interval type: string in: query 説明: 時系列の粒度（日、分、秒） required: true \- name: start\_ts in: query 説明: Unixエポック形式（秒）での時系列の開始を要求します required: false type: string \- name: end\_ts in: query 説明: Unixエポック形式（秒）での時系列の終了を要求します。 required: false type: string \- name: workspace\_name type: string in: path 説明: 要求されたコンシューマとルートを含むワークスペース required: true responses: "200": 説明: 操作は成功しました schema: $ref: "\#/definitions/StatusCodesByEntityTimeSeriesWithMetadata" "400": 説明: 無効なクエリパラメータ "404": 説明: 要求されたコンシューマが見つかりません definitions: ClusterVitalsMetadata: properties: level: type: string example: cluster enum: \- cluster \- node workspace\_id: type: string 説明: この時系列のワークスペースのUUID interval: type: string example: seconds enum: \- seconds \- minutes \- days interval\_width: type: number example: 60 earliest\_ts: type: integer example: 1514508300 latest\_ts: type: integer example: 1514508480 stat\_labels: type: array items: type: string example: \- cache\_datastore\_hits\_total \- cache\_datastore\_misses\_total \- latency\_proxy\_request\_min\_ms \- latency\_proxy\_request\_max\_ms \- latency\_upstream\_min\_ms \- latency\_upstream\_max\_ms \- requests\_proxy\_total \- latency\_proxy\_request\_avg\_ms \- latency\_upstream\_avg\_ms StatusCodesByEntityMetadata: properties: entity\_type: type: string example: service\|route entity\_id: type: string example: <entity\_id> level: type: string example: cluster enum: \- cluster workspace\_id: type: string 説明: この時系列のワークスペースのUUID interval: type: string example: seconds enum: \- seconds \- minutes \- days interval\_width: type: number example: 60 earliest\_ts: type: integer example: 1514508300 latest\_ts: type: integer example: 1514508480 stat\_labels: type: array items: type: string example: \- status\_codes\_service\|route\_total StatusCodesByEntityTimeSeriesWithMetadata: type: object properties: meta: $ref: "\#/definitions/StatusCodesByEntityMetadata" stats: $ref: "\#/definitions/StatusCodesByEntityStats" ClusterVitalsStatusCodesMetadata: properties: level: type: string example: cluster enum: \- cluster interval: type: string example: seconds enum: \- seconds \- minutes \- days interval\_width: type: number example: 60 earliest\_ts: type: integer example: 1514508300 latest\_ts: type: integer example: 1514508480 stat\_labels: type: array items: type: string example: \- status\_code\_classes\_total ClusterVitalsStats: properties: cluster: type: object properties: <timestamp\_n>: type: array items: type: integer 説明: >\- "timestamp\_n"で収集されたstat値のリスト、同じ順序で "meta.stat\_labels" example: \- 999 \- 130 \- 0 \- 35 \- 142 \- 528 \- 1146 \- 110 \- 156 StatusCodesByEntityStats: properties: cluster: type: object 説明: クラスタレベルで利用可能なVitalsのステータスコードデータ properties: <timestamp\_n>: type: object properties: <status\_code>: type: integer 説明: >\- その時点の特定のステータスコードの 総数 example: 1824 ClusterVitalsStatusCodesStats: properties: cluster: type: object 説明: クラスタレベルで利用可能なVitalsのステータスコードデータ properties: <timestamp\_n>: type: object properties: <status\_code\_class>: type: integer 説明: >\- その時点の特定のステータスコードクラスの 総数 example: 1824 ClusterVitalsTimeSeriesWithMetadata: type: object properties: meta: $ref: "\#/definitions/ClusterVitalsMetadata" stats: $ref: "\#/definitions/ClusterVitalsStats" ClusterVitalsStatusCodesWithMetadata: type: object properties: meta: $ref: "\#/definitions/ClusterVitalsStatusCodesMetadata" stats: $ref: "\#/definitions/ClusterVitalsStatusCodesStats" ClusterConsumersMetadata: properties: level: type: string example: cluster enum: \- cluster \- node interval: type: string example: seconds enum: \- seconds \- minutes \- days interval\_width: type: number example: 60 earliest\_ts: type: integer example: 1514508300 latest\_ts: type: integer example: 1514508480 stat\_labels: type: array items: type: string example: \- requests\_consumer\_total ClusterConsumersStats: properties: cluster: type: object properties: <timestamp\_n>: type: integer 説明: >\- "timestamp\_n"で収集された統計値のリスト、同じ順序で "meta.stat\_labels" example: 47 ClusterConsumersTimeSeriesWithMetadata: type: object properties: meta: $ref: "\#/definitions/ClusterConsumersMetadata" stats: $ref: "\#/definitions/ClusterConsumersStats" NodeVitalsMetadata: properties: level: type: string example: node enum: \- cluster \- node workspace\_id: type: string 説明: この時系列が対象となるワークスペースのUUID interval: type: string example: seconds enum: \- seconds \- minutes \- days interval\_width: type: number example: 60 earliest\_ts: type: integer example: 1514508300 latest\_ts: type: integer example: 1514508480 stat\_labels: type: array items: type: string example: \- cache\_datastore\_hits\_total \- cache\_datastore\_misses\_total \- latency\_proxy\_request\_min\_ms \- latency\_proxy\_request\_max\_ms \- latency\_upstream\_min\_ms \- latency\_upstream\_max\_ms \- requests\_proxy\_total \- latency\_proxy\_request\_avg\_ms \- latency\_upstream\_avg\_ms nodes: type: object 説明: >\- この時系列に影響したノードIDの表。この要素 はクラスタレベルのリクエストには含まれません。 properties: <node\_id>: type: object 説明: この時系列に含まれるノードのID。 properties: hostname: type: string 説明: このノードが稼働するホストの名前 NodeVitalsStats: properties: <node\_id>: type: object 説明: >\- この時系列が属するノード、またはクラスターレベルの時系列の 場合は"cluster"。 properties: <timestamp\_n>: type: array items: type: integer 説明: >\- "timestamp\_n"で収集された統計値のリスト、同じ順序で "meta.stat\_labels"example: \- 999 \- 130 \- 0 \- 35 \- 142 \- 528 \- 1146 \- 110 \- 156 NodeVitalsTimeSeriesWithMetadata: type: object properties: meta: $ref: "\#/definitions/NodeVitalsMetadata" stats: $ref: "\#/definitions/NodeVitalsStats" VitalsInfo: type: object example: stats: cache\_datastore\_hits\_total: levels: cluster: intervals: days: retention\_period\_seconds: 63072000 minutes: retention\_period\_seconds: 90000 seconds: retention\_period\_seconds: 3600 nodes: intervals: days: retention\_period\_seconds: 63072000 minutes: retention\_period\_seconds: 90000 seconds: retention\_period\_seconds: 3600 properties: stats: type: object properties: <stat\_label>: type: object properties: levels: type: object 説明: >\- Vitalsのデータは追跡され、異なるレベル（クラスタごと、 ノードごと）の プロパティで 集計される cluster: type: object 説明: Vitalsのデータはクラスタレベルのプロパティで 入手可能 properties: intervals: type: object 説明: >\- Vitalsのデータは異なる間隔（秒、分、日） で入手可能 properties: days: type: object properties: retention\_period\_seconds: type: integer 説明: >\- 日数の間隔で設定された保持期間 （秒単位） minutes: type: object properties: retention\_period\_seconds: type: integer 説明: >\- 秒数の間隔で設定された保持期間 （秒単位） seconds: type: object properties: retention\_period\_seconds: type: integer 説明: \>\- 秒数の間隔で設定された保持期間 （秒単位） nodes: type: object 説明: Vitalsのデータはノードレベルで利用可能 properties: intervals: type: object 説明: >\- Vitalsのデータはさまざまな間隔 （秒、分、日） properties: days: type: object properties: retention\_period\_seconds: type: integer 説明: >\- 日数の間隔で設定された保持期間 （秒単位） minutes: type: object properties: retention\_period\_seconds: type: integer 説明: >\- 分数の間隔で設定された保持期間 （秒単位） seconds: type: object properties: retention\_period\_seconds: type: integer 説明: >\- 秒数の間隔で設定された保持期間 （秒単位）

