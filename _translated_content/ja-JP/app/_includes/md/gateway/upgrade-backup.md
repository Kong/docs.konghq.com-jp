アップグレード中およびデータベース移行中に `kong migrations` コマンドを使用すると元に戻せません。アップグレードする前に、必ずデータベースまたは宣言型構成ファイルをバックアップしてください。

{{site.base_gateway}}エンティティのバックアップには主に2つの種類があります。

* **データベースのバックアップ** : PostgreSQLは、信頼性と性能に優れ、データのバックアップや復元時の一貫性を保証する、ネイティブなエクスポートとインポートのツールを備えています。{{site.base_gateway}}を従来モードまたはハイブリッドモードで実行している場合は、常にデータベースネイティブのバックアップを実行する必要があります。
* **宣言型バックアップ** ：Kongには、宣言形式での{{site.base_gateway}}エンティティの管理をサポートする[decK](/deck/)と[Kong CLI](/gateway/{{include.release}}/reference/cli/)という 2 つの宣言型バックアップツールが付属しています。 従来型およびハイブリッドモードのデプロイメントでは、これらのツールを使用して二次バックアップを作成してください。DBレスモードのデプロイメントの場合は、Kong CLIを使用して、宣言型構成ファイルを手動で管理します。

回復の柔軟性を高めるため、可能であれば、両方の方法を使用してデータをバックアップすることを強くお勧めします。

データベースネイティブツールは、宣言型ツールに比べて堅牢でかつデータを即座に復元できます。データが破損した場合は、まずデータベースレベルの復元を実行してみてください。
あるいは、新しいデータベースをブートストラップし、宣言型ツールを使用してバックアップファイルから設定を復元してください。

[バックアップと復元](/gateway/{{include.release}}/upgrade/backup-and-restore/)のガイドを確認して、構成のバックアップを準備します。問題が発生してロールバックする必要がある場合は、そのガイドを参照して古いデータストアを復元することもできます。

